<main  class="content " class="border-3 " >

    <div class="card-body mh-300" *ngIf="loading">
        <div class="d-flex justify-content-center align-items-center h-100 mh-300">
          <div class="spinner-border text-primary" style="width: 4rem; height: 4rem;" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>
      </div>


    <div class="container-fluid" *ngIf="!loading">
        <div class="header " >
            <h1 class="header-title" >
                 Welcome back, {{mostrarUsuarioLogueado()}} 
            </h1> 
            <div class="col-auto" >
                <div class="card border-bottom-5 border-right " >           
                        <h2 class="card-title text-center fs-5 p-15">Conmutaciones en sensor {{idSensor}}</h2> 
                </div>     
            </div>

            <div class="row">
                <div class="col-4">
                    <table class="table table-striped table-hover" >
                        <thead   style="background-image: linear-gradient(to bottom right, #eaf2f3f5, #00778B);">
                        <tr>
                            <th >Hora inicio</th>
                            <th >Canal</th>
                            <th >Estado</th>  
                         
                        </tr>
                        </thead>
                        <tbody >
                        <tr  *ngFor="let comm of commutation; let i=index">                      
                    
                            <td> {{ comm.timestamp | date : 'dd/MM/YYYY HH:mm:ss' }}</td>
                            <td> {{ comm.channel }}</td>
                            <td  >  <ng-container *ngIf="(comm.value=='true'); else elseTemplate">
                                ON 
                            </ng-container>
                            <ng-template #elseTemplate>
                                OFF
                            </ng-template>
                            
                        </tr>                  
                        </tbody>
                    </table>
                </div>
                
                
                <div class="col-3">
                    <table class="table table-striped table-hover" >
                        <thead   style="background-image: linear-gradient(to bottom right, #eaf2f3f5, #00778B);">
                        <tr>
                            <th >ON</th>
                            <th >OFF</th>                         
                         
                        </tr>
                        </thead>
                        <tbody >
                        <tr  *ngFor="let comm of commutation; let i=index">                      
                    
                          <ng-container *ngIf="i==0; else elseTemplate">
                              <td style="color: transparent;"> 00:00:00</td>
                              <td style="color: transparent;">00:00:00</td>
                          </ng-container>
                          <ng-template #elseTemplate>

                            <ng-container *ngIf="i%2==0; else elseTemplate">
                                <td> {{ TablaOnOff[i-1]  }}</td>
                                </ng-container>
                                <ng-template #elseTemplate>
                                    <td></td>
                                </ng-template>

                                <ng-container *ngIf="i%2==1; else elseTemplate">
                                    <td> {{ TablaOnOff[i-1]  }}</td>
                                </ng-container>
                                <ng-template #elseTemplate>
                                    <td></td>
                                </ng-template>
                             

                          </ng-template>
                                    
                        </tr>                  
                        </tbody>
                    </table>
                </div>


                <div class="col">
                    <div class="card border-bottom-5 border-right" >

                        <span class="card-title text-center "> An√°lisis</span>
                            <div class="card-body">                        
                                <span class="card-text"> </span>
                                <p> Maniobras totales : {{ TablaOnOff.length}}</p>
                                <p> Media maniobras ON: {{"16:21"}}</p>
                                <p> Media maniobras OFF: {{"14:41"}}</p>
                            </div>
                    </div>                  
                </div>
            </div>
        </div>
    </div>
</main>
